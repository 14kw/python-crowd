

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Welcome to python-crowd’s documentation! &mdash; python-crowd 0.9.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="python-crowd 0.9.0 documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">python-crowd 0.9.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="welcome-to-python-crowd-s-documentation">
<h1>Welcome to python-crowd&#8217;s documentation!<a class="headerlink" href="#welcome-to-python-crowd-s-documentation" title="Permalink to this headline">¶</a></h1>
<p>python-crowd is a python client library to the Atlassian Crowd REST API.</p>
<p>This library may be useful to you if you wish to create an application
that authenticates users against Crowd or integrate with Crowd&#8217;s SSO.</p>
<p>This project has no official status within Atlassian and is provided as
a service to the programming community. I hope that you find it useful.</p>
</div>
<div class="section" id="documentation">
<h1>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h1>
<p>Docs are built automatically by sphinx. You can build them yourself
in the doc directory or access them at
&lt;<a class="reference external" href="http://aelse.github.com/python-crowd/">http://aelse.github.com/python-crowd/</a>&gt;.</p>
</div>
<div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<p>Some example invocations are provided in the examples directory, and
are included in the built documentation.</p>
<p>The unit tests may also be instructive.</p>
</div>
<div class="section" id="license">
<h1>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h1>
<p><em>BSD 2-Clause License</em></p>
<p>Copyright (c) 2012-2013, Alexander Else
All rights reserved.</p>
<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions
are met:</p>
<ul class="simple">
<li>Redistributions of source code must retain the above copyright notice,
this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.</li>
</ul>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
&#8220;AS IS&#8221; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS
OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.</p>
</div>
<div class="section" id="contributors">
<h1>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h1>
<p>This project has been enhanced through the work of a number of contributors.
If you contribute to this project you can add your name and/or github username
to the end of this list and include the change in your pull request.</p>
<ul class="simple">
<li>Alexander Else (&#64;aelse) - Original author</li>
<li>Luke Cyca (&#64;lukecyca)</li>
<li>Dan Hansen (&#64;dansomething)</li>
<li>Terin Stock (&#64;terinjokes)</li>
<li>Sorin Sbarnea (&#64;ssbarnea)</li>
<li>Christian Schläppi (&#64;nevious)</li>
</ul>
<p>Contents:</p>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
<span class="target" id="module-crowd"></span><dl class="class">
<dt id="crowd.CrowdServer">
<em class="property">class </em><tt class="descclassname">crowd.</tt><tt class="descname">CrowdServer</tt><big>(</big><em>crowd_url</em>, <em>app_name</em>, <em>app_pass</em><big>)</big><a class="headerlink" href="#crowd.CrowdServer" title="Permalink to this definition">¶</a></dt>
<dd><p>Crowd server authentication object.</p>
<p>This is a Crowd authentication class to be configured for a
particular application (app_name) to authenticate users
against a Crowd server (crowd_url).</p>
<p>This module uses the Crowd JSON API for talking to Crowd.</p>
<p>An application account must be configured in the Crowd server
and permitted to authenticate users against one or more user
directories prior to using this module.</p>
<p>Please see the Crowd documentation for information about
configuring additional applications to talk to Crowd.</p>
<dl class="method">
<dt id="crowd.CrowdServer.auth_ping">
<tt class="descname">auth_ping</tt><big>(</big><big>)</big><a class="headerlink" href="#crowd.CrowdServer.auth_ping" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that application can authenticate to Crowd.</p>
<p>Attempts to authentication the application user against
the Crowd server. In order for user authentication to
work, an application must be able to authenticate.</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd><dl class="first last docutils">
<dt>bool:</dt>
<dd>True if the application authentication succeeded.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="crowd.CrowdServer.auth_user">
<tt class="descname">auth_user</tt><big>(</big><em>username</em>, <em>password</em><big>)</big><a class="headerlink" href="#crowd.CrowdServer.auth_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Authenticate a user account against the Crowd server.</p>
<p>Attempts to authenticate the user against the Crowd server.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><p class="first">username: The account username.</p>
<p class="last">password: The account password.</p>
</dd>
<dt>Returns:</dt>
<dd><dl class="first docutils">
<dt>dict:</dt>
<dd>A dict mapping of user attributes if the application
authentication was successful. See the Crowd documentation
for the authoritative list of attributes.</dd>
</dl>
<p class="last">None: If authentication failed.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="crowd.CrowdServer.get_groups">
<tt class="descname">get_groups</tt><big>(</big><em>username</em><big>)</big><a class="headerlink" href="#crowd.CrowdServer.get_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves a list of group names that have &lt;username&gt; as a direct member.</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd><dl class="first last docutils">
<dt>list:</dt>
<dd>A list of strings of group names.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="crowd.CrowdServer.get_nested_group_users">
<tt class="descname">get_nested_group_users</tt><big>(</big><em>groupname</em><big>)</big><a class="headerlink" href="#crowd.CrowdServer.get_nested_group_users" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves a list of all users that directly or indirectly belong to the given groupname.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>groupname: The group name.</dd>
<dt>Returns:</dt>
<dd><dl class="first last docutils">
<dt>list:</dt>
<dd>A list of strings of user names.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="crowd.CrowdServer.get_nested_groups">
<tt class="descname">get_nested_groups</tt><big>(</big><em>username</em><big>)</big><a class="headerlink" href="#crowd.CrowdServer.get_nested_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of all group names that have &lt;username&gt; as a direct or indirect member.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>username: The account username.</dd>
<dt>Returns:</dt>
<dd><dl class="first last docutils">
<dt>list:</dt>
<dd>A list of strings of group names.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="crowd.CrowdServer.get_session">
<tt class="descname">get_session</tt><big>(</big><em>username</em>, <em>password</em>, <em>remote='127.0.0.1'</em><big>)</big><a class="headerlink" href="#crowd.CrowdServer.get_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a session for a user.</p>
<p>Attempts to create a user session on the Crowd server.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><p class="first">username: The account username.</p>
<p>password: The account password.</p>
<dl class="last docutils">
<dt>remote:</dt>
<dd>The remote address of the user. This can be used
to create multiple concurrent sessions for a user.
The host you run this program may need to be configured
in Crowd as a trusted proxy for this to work.</dd>
</dl>
</dd>
<dt>Returns:</dt>
<dd><dl class="first docutils">
<dt>dict:</dt>
<dd>A dict mapping of user attributes if the application
authentication was successful. See the Crowd
documentation for the authoritative list of attributes.</dd>
</dl>
<p class="last">None: If authentication failed.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="crowd.CrowdServer.terminate_session">
<tt class="descname">terminate_session</tt><big>(</big><em>token</em><big>)</big><a class="headerlink" href="#crowd.CrowdServer.terminate_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Terminates the session token, effectively logging out the user
from all crowd-enabled services.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>token: The session token.</dd>
<dt>Returns:</dt>
<dd><p class="first">True: If session terminated</p>
<p class="last">None: If session termination failed</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="crowd.CrowdServer.user_exists">
<tt class="descname">user_exists</tt><big>(</big><em>username</em><big>)</big><a class="headerlink" href="#crowd.CrowdServer.user_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines if the user exists.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>username: The user name.</dd>
<dt>Returns:</dt>
<dd><dl class="first last docutils">
<dt>bool:</dt>
<dd>True if the user exists in the Crowd application.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="crowd.CrowdServer.validate_session">
<tt class="descname">validate_session</tt><big>(</big><em>token</em>, <em>remote='127.0.0.1'</em><big>)</big><a class="headerlink" href="#crowd.CrowdServer.validate_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate a session token.</p>
<p>Validate a previously acquired session token against the
Crowd server. This may be a token provided by a user from
a http cookie or by some other means.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><p class="first">token: The session token.</p>
<p class="last">remote: The remote address of the user.</p>
</dd>
<dt>Returns:</dt>
<dd><dl class="first docutils">
<dt>dict:</dt>
<dd>A dict mapping of user attributes if the application
authentication was successful. See the Crowd
documentation for the authoritative list of attributes.</dd>
</dl>
<p class="last">None: If authentication failed.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="simple-authentication-test">
<h1>Simple Authentication Test<a class="headerlink" href="#simple-authentication-test" title="Permalink to this headline">¶</a></h1>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">crowd</span>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">getpass</span>

<span class="n">app_url</span> <span class="o">=</span> <span class="s">&#39;http://my.crowd.server:8095/crowd/&#39;</span>
<span class="n">app_user</span> <span class="o">=</span> <span class="s">&#39;testapp&#39;</span>
<span class="n">app_pass</span> <span class="o">=</span> <span class="s">&#39;testpass&#39;</span>

<span class="hll"><span class="c"># Create the reusable Crowd object</span>
</span><span class="hll"><span class="n">cs</span> <span class="o">=</span> <span class="n">crowd</span><span class="o">.</span><span class="n">CrowdServer</span><span class="p">(</span><span class="n">app_url</span><span class="p">,</span> <span class="n">app_user</span><span class="p">,</span> <span class="n">app_pass</span><span class="p">)</span>
</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;USER&#39;</span><span class="p">]</span>

<span class="n">password</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="n">prompt</span><span class="o">=</span><span class="s">&#39;Enter password for </span><span class="si">%s</span><span class="s">: &#39;</span> <span class="o">%</span> <span class="n">username</span><span class="p">)</span>

<span class="hll"><span class="n">success</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">auth_user</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
</span><span class="k">if</span> <span class="n">success</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;Successfully authenticated.&#39;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;Failed to authenticate.&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="simple-token-authentication">
<h1>Simple Token Authentication<a class="headerlink" href="#simple-token-authentication" title="Permalink to this headline">¶</a></h1>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">crowd</span>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">getpass</span>

<span class="n">app_url</span> <span class="o">=</span> <span class="s">&#39;http://my.crowd.server:8095/crowd/&#39;</span>
<span class="n">app_user</span> <span class="o">=</span> <span class="s">&#39;testapp&#39;</span>
<span class="n">app_pass</span> <span class="o">=</span> <span class="s">&#39;testpass&#39;</span>

<span class="hll"><span class="c"># Create the reusable Crowd object</span>
</span><span class="hll"><span class="n">cs</span> <span class="o">=</span> <span class="n">crowd</span><span class="o">.</span><span class="n">CrowdServer</span><span class="p">(</span><span class="n">app_url</span><span class="p">,</span> <span class="n">app_user</span><span class="p">,</span> <span class="n">app_pass</span><span class="p">)</span>
</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;USER&#39;</span><span class="p">]</span>

<span class="n">password</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="n">prompt</span><span class="o">=</span><span class="s">&#39;Enter password for </span><span class="si">%s</span><span class="s">: &#39;</span> <span class="o">%</span> <span class="n">username</span><span class="p">)</span>

<span class="hll"><span class="c"># Create a session. The important bit is the token.</span>
</span><span class="hll"><span class="n">session</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">get_session</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
</span><span class="k">if</span> <span class="n">session</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;Created a session, token </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">session</span><span class="p">[</span><span class="s">&#39;token&#39;</span><span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;Failed to authenticate.&#39;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="hll"><span class="c"># Check that the token is valid (and of course it should be).</span>
</span><span class="hll"><span class="n">success</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">validate_session</span><span class="p">(</span><span class="n">session</span><span class="p">[</span><span class="s">&#39;token&#39;</span><span class="p">])</span>
</span><span class="k">if</span> <span class="n">success</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;Authenticated session token.&#39;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;Failed to authenticate token.&#39;</span>
</pre></div>
</td></tr></table></div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to python-crowd&#8217;s documentation!</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#license">License</a></li>
<li><a class="reference internal" href="#contributors">Contributors</a><ul>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
<li><a class="reference internal" href="#simple-authentication-test">Simple Authentication Test</a></li>
<li><a class="reference internal" href="#simple-token-authentication">Simple Token Authentication</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">python-crowd 0.9.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Alexander Else.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>